<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Backgammon (Nard Style)</title>
<style>
body {
  margin: 0;
  font-family: Arial;
  background: #222;
  color: white;
  text-align: center;
}

#board {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  width: 900px;
  height: 400px;
  margin: 30px auto;
  background: #8b5a2b;
  border: 6px solid #3e2723;
}

.point {
  border: 1px solid rgba(0,0,0,0.3);
  position: relative;
}

.point:nth-child(odd) {
  background: #d2a679;
}

.point:nth-child(even) {
  background: #5d4037;
}

.checker {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  cursor: grab;
  transition: transform 0.2s;
}

.white { background: white; }
.black { background: black; }

#controls {
  margin-top: 20px;
}

button {
  padding: 10px 20px;
  font-size: 18px;
  cursor: pointer;
}

#dice {
  font-size: 24px;
  margin-top: 10px;
}

</style>
</head>
<body>

<h1>Backgammon (Nard Style)</h1>

<div id="board"></div>

<div id="controls">
  <button onclick="rollDice()">ðŸŽ² Roll Dice</button>
  <div id="dice">Dice: -</div>
</div>

<script>
const board = document.getElementById('board');
let selectedChecker = null;
let dice = [];
let currentPlayer = 'white';

// Create board
for (let i = 0; i < 24; i++) {
  const point = document.createElement('div');
  point.classList.add('point');
  point.dataset.index = i;

  point.addEventListener('dragover', e => e.preventDefault());

  point.addEventListener('drop', e => {
    if (!selectedChecker) return;

    const from = parseInt(selectedChecker.parentElement.dataset.index);
    const to = parseInt(point.dataset.index);
    const move = Math.abs(to - from);

    if (!dice.includes(move)) {
      alert('Invalid move!');
      return;
    }

    point.appendChild(selectedChecker);
    useDice(move);

    selectedChecker = null;
    checkTurnEnd();
  });

  board.appendChild(point);
}

// Create checkers
function createChecker(color, pointIndex, count) {
  const point = board.children[pointIndex];

  for (let i = 0; i < count; i++) {
    const checker = document.createElement('div');
    checker.classList.add('checker', color);
    checker.draggable = true;

    checker.style.top = (i * 32) + 'px';

    checker.addEventListener('dragstart', () => {
      if (color !== currentPlayer) return;
      selectedChecker = checker;
      checker.style.transform = 'scale(1.2)';
    });

    checker.addEventListener('dragend', () => {
      checker.style.transform = 'translateX(-50%)';
    });

    point.appendChild(checker);
  }
}

// Initial positions (simplified)
createChecker('white', 0, 2);
createChecker('white', 11, 5);
createChecker('white', 16, 3);
createChecker('white', 18, 5);

createChecker('black', 23, 2);
createChecker('black', 12, 5);
createChecker('black', 7, 3);
createChecker('black', 5, 5);

// Dice
function rollDice() {
  dice = [rand(), rand()];
  if (dice[0] === dice[1]) {
    dice = [dice[0], dice[0], dice[0], dice[0]];
  }

  document.getElementById('dice').innerText = 'Dice: ' + dice.join(', ');
}

function rand() {
  return Math.floor(Math.random() * 6) + 1;
}

function useDice(value) {
  const i = dice.indexOf(value);
  if (i !== -1) dice.splice(i, 1);
  updateDice();
}

function updateDice() {
  document.getElementById('dice').innerText = 'Dice: ' + (dice.length ? dice.join(', ') : '-');
}

function checkTurnEnd() {
  if (dice.length === 0) {
    currentPlayer = currentPlayer === 'white' ? 'black' : 'white';
    alert(currentPlayer + ' turn');
  }
}

</script>

</body>
</html>
