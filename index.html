<!DOCTYPE html>
<html lang="ka">
<head>
<meta charset="UTF-8">
<title>ğŸ² áƒ’áƒ áƒ«áƒ”áƒšáƒ˜ áƒœáƒáƒ áƒ“áƒ˜ PRO</title>
<style>
body { margin:0; background:#111; color:white; font-family:sans-serif; text-align:center; }
#ui { padding:10px; }
canvas { background:#5b3a1e; border:6px solid #2d1b0f; display:block; margin:0 auto; border-radius:12px; }
button { padding:10px 20px; font-size:18px; margin:5px; cursor:pointer; }
</style>
</head>
<body>

<h1>ğŸ² áƒ’áƒ áƒ«áƒ”áƒšáƒ˜ áƒœáƒáƒ áƒ“áƒ˜ (PRO)</h1>
<div id="ui">
  <button onclick="rollDice()">áƒ™áƒ£áƒ‘áƒ˜áƒ™áƒ”áƒ‘áƒ˜áƒ¡ áƒ’áƒáƒ’áƒáƒ áƒ”áƒ‘áƒ</button>
  <span id="info"></span>
</div>

<canvas id="board" width="900" height="500"></canvas>

<script>
const canvas = document.getElementById('board');
const ctx = canvas.getContext('2d');

let points = [];
let dice = [];
let currentPlayer = 1; // 1 white, 2 black
let selected = null;

function init() {
  points = Array(24).fill().map(()=>[]);

  // áƒ’áƒ áƒ«áƒ”áƒšáƒ˜ áƒœáƒáƒ áƒ“áƒ˜áƒ¡ áƒ¡áƒáƒ¬áƒ§áƒ˜áƒ¡áƒ˜
  for(let i=0;i<15;i++){
    points[0].push(1);
    points[23].push(2);
  }

  currentPlayer = 1;
  dice = [];
}

function draw() {
  ctx.clearRect(0,0,900,500);

  for(let i=0;i<24;i++){
    let x = (i%12)*75 + 10;
    let y = i<12 ? 0 : 250;

    ctx.fillStyle = i%2==0 ? '#d2b48c' : '#6b4423';
    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.lineTo(x+70,y);
    ctx.lineTo(x+35,y+230);
    ctx.fill();

    drawCheckers(i,x,y);
  }

  document.getElementById('info').textContent =
    'áƒ›áƒáƒ—áƒáƒ›áƒáƒ¨áƒ”: ' + (currentPlayer==1?'áƒ—áƒ”áƒ—áƒ áƒ˜':'áƒ¨áƒáƒ•áƒ˜') +
    ' | áƒ™áƒ£áƒ‘áƒ˜áƒ™áƒ”áƒ‘áƒ˜: ' + (dice.join(', ') || '-');
}

function drawCheckers(i,x,y){
  let stack = points[i];
  for(let j=0;j<stack.length;j++){
    ctx.beginPath();
    ctx.arc(x+35, y + (i<12 ? 240 - j*18 : 20 + j*18), 16, 0, Math.PI*2);
    ctx.fillStyle = stack[j]==1 ? 'white' : 'black';
    ctx.fill();
  }
}

canvas.addEventListener('click', function(e){
  let rect = canvas.getBoundingClientRect();
  let mx = e.clientX - rect.left;
  let my = e.clientY - rect.top;

  let index = Math.floor(mx/75);
  if(my>250) index +=12;

  if(selected==null){
    if(points[index].length && points[index][0]==currentPlayer){
      selected=index;
    }
  } else {
    tryMove(selected,index);
    selected=null;
  }

  draw();
});

function tryMove(from,to){
  if(dice.length==0) return;

  let dir = currentPlayer==1 ? 1 : -1;
  let step = (to-from)*dir;

  if(step<=0) return;

  let dieIndex = dice.indexOf(step);
  if(dieIndex==-1) return;

  // áƒ’áƒ áƒ«áƒ”áƒšáƒ˜ áƒœáƒáƒ áƒ“áƒ˜áƒ¡ áƒ¬áƒ”áƒ¡áƒ”áƒ‘áƒ˜
  if(points[to].some(p=>p!=currentPlayer)) return; // áƒ‘áƒšáƒáƒ™áƒ˜

  // move
  let piece = points[from].shift();
  points[to].unshift(piece);
  dice.splice(dieIndex,1);

  if(dice.length==0){
    currentPlayer = currentPlayer==1?2:1;
    if(currentPlayer==2) setTimeout(aiMove,500);
  }
}

function rollDice(){
  if(dice.length>0) return;

  let d1 = rand();
  let d2 = rand();

  dice = d1==d2 ? [d1,d1,d1,d1] : [d1,d2];

  if(currentPlayer==2) setTimeout(aiMove,500);

  draw();
}

function rand(){ return Math.floor(Math.random()*6)+1; }

// áƒ›áƒáƒ áƒ¢áƒ˜áƒ•áƒ˜ AI
function aiMove(){
  if(currentPlayer!=2) return;

  let movesMade = false;

  for(let d of [...dice]){
    for(let i=23;i>=0;i--){
      if(points[i].length && points[i][0]==2){
        let to = i - d;
        if(to>=0 && points[to].every(p=>p==2)){
          points[i].shift();
          points[to].unshift(2);
          dice.splice(dice.indexOf(d),1);
          movesMade = true;
          break;
        }
      }
    }
  }

  if(dice.length==0 || !movesMade){
    dice=[];
    currentPlayer=1;
  }

  draw();
}

init();
draw();
</script>

</body>
</html>
